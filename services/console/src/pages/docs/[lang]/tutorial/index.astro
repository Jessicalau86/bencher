---
import { getCollection } from "astro:content";
import { defaultLang } from "../../../../i18n/ui";
import { Collection } from "../../../../content/config";

export async function getStaticPaths() {
  const pages = await getCollection(Collection.tutorial);
  return pages.map(page => {
    const [lang, ...slug] = page.id.substring(0, page.id.lastIndexOf('.'))?.split('/');
    return { params: { lang, slug: slug.join('/') || undefined }, props: page }
  }).filter(page => page.params.lang !== defaultLang);
}

const { lang } = Astro.params;
---
<meta http-equiv="refresh" content={`0;url=/docs/${lang}`} />